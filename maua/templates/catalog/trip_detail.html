{% extends 'base.html' %}
{% block content %}
<div class="container">
  <h2>Trip #{{ trip.id }} - {{ trip.vehicle.plate_no }}</h2>
  <p><strong>Route:</strong> {{ trip.route.origin.town }} â†’ {{ trip.route.destination.town }}</p>
  <div class="mb-3">
    <span class="badge bg-success">Green = Checked-in/On board</span>
    <span class="badge bg-primary">Blue = Booked (not fetched)</span>
    <span class="badge bg-danger">Red = Available</span>
  </div>
  <div class="seat-grid d-flex flex-wrap gap-2">
    {% for seat in seat_layout %}
      {% set code = seat['seat'] %}
      {% set status = seat_status.get(code, 'red') %}
      <div class="seat badge {% if status=='green' %}bg-success{% elif status=='blue' %}bg-primary{% else %}bg-danger{% endif %}" style="min-width:48px">{{ code }}</div>
    {% endfor %}
  </div>
  <div class="mt-3">
    <a class="btn btn-outline-primary" href="{{ url_for('booking.book', trip_id=trip.id) }}">Book a Seat</a>
  </div>
</div>
{% endblock %}



{% extends 'base.html' %}
{% block content %}
<div class="container contrast-scope">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="mb-0"><i class="fas fa-box me-2"></i>Your Parcels</h4>
        <a href="{{ url_for('parcels.create') }}" class="btn btn-primary"><i class="fas fa-plus me-2"></i>Create Parcel</a>
    </div>
    {% if parcels %}
    <div class="table-responsive">
        <table class="table table-hover align-middle table-contrast">
            <thead>
                <tr>
                    <th>Ref</th>
                    <th>Sender</th>
                    <th>Receiver</th>
                    <th>Origin</th>
                    <th>Destination</th>
                    <th>Weight (kg)</th>
                    <th>Status</th>
                    <th>Photo</th>
                    <th>Created</th>
                </tr>
            </thead>
            <tbody>
                {% for p in parcels %}
                <tr>
                    <td>{{ p.ref_code }}</td>
                    <td>{{ p.sender_name }}</td>
                    <td>{{ p.receiver_name }}</td>
                    <td>{{ p.origin_name }}</td>
                    <td>{{ p.destination_name }}</td>
                    <td>{{ '%.1f'|format(p.weight_kg or 0) }}</td>
                    <td><span class="badge bg-secondary">{{ p.status }}</span></td>
                    <td>
                        {% if p.photo_filename %}
                        <img src="{{ url_for('static', filename='uploads/parcels/' ~ p.photo_filename) }}" alt="parcel photo" style="width:56px;height:40px;object-fit:cover;border-radius:4px;"/>
                        {% else %}
                        <span class="text-muted">â€”</span>
                        {% endif %}
                    </td>
                    <td>{{ p.created_at.strftime('%Y-%m-%d %H:%M') if p.created_at }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="alert alert-info">No parcels yet. Create your first one.</div>
    {% endif %}
</div>
{% endblock %}

